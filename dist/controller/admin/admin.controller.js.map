{"version":3,"file":"admin.controller.js","sourceRoot":"","sources":["../../../src/controller/admin/admin.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,2CAA4C;AAC5C,yBAA2B;AAC3B,+CAAmD;AACnD,yCAAuC;AAEvC;IAAA;IAcA,CAAC;IAbS,qCAAW,GAAjB,UAAkB,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;;;wBACvD,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC;wBAEhB,KAAK,GAAI,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,8BAAiB,CAAC,MAA1C,CAA2C;wBACvD,IAAI,KAAK,EAAE;4BACP,sBAAO,IAAI,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAC;yBACpD;wBACD,KAAA,KAAK,CAAA;wBAAY,qBAAM,kBAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAA;;wBAA/C,GAAM,QAAQ,GAAG,SAA8B,CAAC;wBAChD,oBAAoB;wBACpB,kCAAkC;wBAClC,qBAAM,uBAAY,CAAC,WAAW,CAAC,KAAK,CAAC,EAAA;;wBAFrC,oBAAoB;wBACpB,kCAAkC;wBAClC,SAAqC,CAAC;wBACtC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;;;;KACnB;IACL,sBAAC;AAAD,CAAC,AAdD,IAcC;AAdY,0CAAe;AAgBf,QAAA,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC","sourcesContent":["import {NextFunction, Request, Response} from 'express';\nimport {adminService} from '../../services';\nimport * as Joi from 'joi';\nimport {newAdminValidator} from '../../validators';\nimport {hashData} from '../../helpers';\n\nexport class AdminController {\n    async createAdmin(req: Request, res: Response, next: NextFunction) {\n        const admin = req.body;\n\n        const {error} = Joi.validate(admin, newAdminValidator);\n        if (error) {\n            return next(new Error(error.details[0].message));\n        }\n        admin.password = await hashData(admin.password);\n        //todo hash password\n        //todo send email you is admin now\n        await adminService.createAdmin(admin);\n        res.json(admin);\n    }\n}\n\nexport const adminController = new AdminController();\n"]}